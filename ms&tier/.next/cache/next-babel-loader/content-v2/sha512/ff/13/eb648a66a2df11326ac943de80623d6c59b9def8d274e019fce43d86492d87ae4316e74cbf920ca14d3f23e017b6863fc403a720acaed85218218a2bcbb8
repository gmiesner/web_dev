{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/gmiesner/Documents/personal-code/web_dev/ms&tier/components/Search.js\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport Dropdown from \"./Dropdown\";\nimport SearchInput from \"./SearchInput\";\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuHidden: true,\n      loading: false,\n      results: []\n    };\n    this.search = this.search.bind(this);\n    this.escapeMenu = this.escapeMenu.bind(this);\n    this.selectCourse = this.selectCourse.bind(this);\n  }\n\n  async search(event) {\n    const query = event.target.value;\n\n    if (!query) {\n      return;\n    } // show loading message\n\n\n    this.setState({\n      loading: true\n    }); // API call\n    // TODO: cache results?\n\n    const url = `/api/courses/?query=${encodeURIComponent(query)}`;\n    const response = await axios.get(url).catch(() => {\n      alert(\"Unfortunately, an error occured :(\");\n      return;\n    }); // update data, hide \"Loading...\", make results menu visible\n\n    this.setState({\n      menuHidden: false,\n      loading: false,\n      results: response.data\n    });\n  } // hide menu with \"Esc\"\n  // TODO: hide menu when clicking outside the component\n\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.escapeMenu, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.escapeMenu, false);\n  }\n\n  escapeMenu(event) {\n    if (event.keyCode === 27) {\n      this.setState({\n        menuHidden: true\n      });\n    }\n  }\n\n  selectCourse(e) {\n    this.props.addClass(e.target.value);\n    this.setState({\n      menuHidden: true\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(SearchInput, {\n        onChange: this.search,\n        loading: this.state.loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n        menuHidden: this.state.menuHidden,\n        selectCourse: this.selectCourse,\n        results: this.state.results\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/gmiesner/Documents/personal-code/web_dev/ms&tier/components/Search.js"],"names":["axios","React","Dropdown","SearchInput","Search","Component","constructor","props","state","menuHidden","loading","results","search","bind","escapeMenu","selectCourse","event","query","target","value","setState","url","encodeURIComponent","response","get","catch","alert","data","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","keyCode","e","addClass","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,eAAe,MAAMC,MAAN,SAAqBH,KAAK,CAACI,SAA3B,CAAqC;AAClDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,UAAU,EAAE,IAAd;AAAoBC,MAAAA,OAAO,EAAE,KAA7B;AAAoCC,MAAAA,OAAO,EAAE;AAA7C,KAAb;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;AACD;;AAED,QAAMD,MAAN,CAAaI,KAAb,EAAoB;AAClB,UAAMC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAA3B;;AACA,QAAI,CAACF,KAAL,EAAY;AACV;AACD,KAJiB,CAMlB;;;AACA,SAAKG,QAAL,CAAc;AAAEV,MAAAA,OAAO,EAAE;AAAX,KAAd,EAPkB,CASlB;AACA;;AACA,UAAMW,GAAG,GAAI,uBAAsBC,kBAAkB,CAACL,KAAD,CAAQ,EAA7D;AACA,UAAMM,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAN,CAAUH,GAAV,EAAeI,KAAf,CAAqB,MAAM;AAChDC,MAAAA,KAAK,CAAC,oCAAD,CAAL;AACA;AACD,KAHsB,CAAvB,CAZkB,CAiBlB;;AACA,SAAKN,QAAL,CAAc;AACZX,MAAAA,UAAU,EAAE,KADA;AAEZC,MAAAA,OAAO,EAAE,KAFG;AAGZC,MAAAA,OAAO,EAAEY,QAAQ,CAACI;AAHN,KAAd;AAKD,GAhCiD,CAkClD;AACA;;;AACAC,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC,KAAKhB,UAA1C,EAAsD,KAAtD;AACD;;AACDiB,EAAAA,oBAAoB,GAAG;AACrBF,IAAAA,QAAQ,CAACG,mBAAT,CAA6B,SAA7B,EAAwC,KAAKlB,UAA7C,EAAyD,KAAzD;AACD;;AACDA,EAAAA,UAAU,CAACE,KAAD,EAAQ;AAChB,QAAIA,KAAK,CAACiB,OAAN,KAAkB,EAAtB,EAA0B;AACxB,WAAKb,QAAL,CAAc;AAAEX,QAAAA,UAAU,EAAE;AAAd,OAAd;AACD;AACF;;AAEDM,EAAAA,YAAY,CAACmB,CAAD,EAAI;AACd,SAAK3B,KAAL,CAAW4B,QAAX,CAAoBD,CAAC,CAAChB,MAAF,CAASC,KAA7B;AACA,SAAKC,QAAL,CAAc;AAAEX,MAAAA,UAAU,EAAE;AAAd,KAAd;AACD;;AAED2B,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE,QAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKxB,MAA5B;AAAoC,QAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWE;AAAxD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,QAAD;AACE,QAAA,UAAU,EAAE,KAAKF,KAAL,CAAWC,UADzB;AAEE,QAAA,YAAY,EAAE,KAAKM,YAFrB;AAGE,QAAA,OAAO,EAAE,KAAKP,KAAL,CAAWG;AAHtB;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAUD;;AAhEiD","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport Dropdown from \"./Dropdown\";\nimport SearchInput from \"./SearchInput\";\n\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { menuHidden: true, loading: false, results: [] };\n    this.search = this.search.bind(this);\n    this.escapeMenu = this.escapeMenu.bind(this);\n    this.selectCourse = this.selectCourse.bind(this);\n  }\n\n  async search(event) {\n    const query = event.target.value;\n    if (!query) {\n      return;\n    }\n\n    // show loading message\n    this.setState({ loading: true });\n\n    // API call\n    // TODO: cache results?\n    const url = `/api/courses/?query=${encodeURIComponent(query)}`;\n    const response = await axios.get(url).catch(() => {\n      alert(\"Unfortunately, an error occured :(\");\n      return;\n    });\n\n    // update data, hide \"Loading...\", make results menu visible\n    this.setState({\n      menuHidden: false,\n      loading: false,\n      results: response.data,\n    });\n  }\n\n  // hide menu with \"Esc\"\n  // TODO: hide menu when clicking outside the component\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.escapeMenu, false);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.escapeMenu, false);\n  }\n  escapeMenu(event) {\n    if (event.keyCode === 27) {\n      this.setState({ menuHidden: true });\n    }\n  }\n\n  selectCourse(e) {\n    this.props.addClass(e.target.value);\n    this.setState({ menuHidden: true });\n  }\n\n  render() {\n    return (\n      <div>\n        <SearchInput onChange={this.search} loading={this.state.loading} />\n        <Dropdown\n          menuHidden={this.state.menuHidden}\n          selectCourse={this.selectCourse}\n          results={this.state.results}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}